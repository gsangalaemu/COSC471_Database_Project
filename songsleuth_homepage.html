<!DOCTYPE html>
<html>
    <head>
        <style>
            .backgroundDiv{
                background-color: lightblue;
                justify-self: center;
                text-align: center;

                max-width: 1000px;
                min-width: 900px;

                max-height: 1000px;
                min-height: 400px;

                margin-top: 10px;
                padding: 10px;
            }
            .bubbleDiv{
                background-color: plum;
                width: fit-content;
                height: fit-content;
                padding-left: 2%;
                padding-right: 2%;
                margin: 5px

            }
            .formDiv{
                align-content: center;
                background-color: lightsalmon;
                margin: 10px 10% 10px;
                border-radius: 15px;

                max-width: 800px;


                padding: 20px;
                display: none;
            }
            .tableDiv{
                align-content: center;
                background-color: palegoldenrod;
                margin: 10px 10% 10px;
                border-radius: 15px;

                max-width: 800px;


                padding: 20px;
                display: none;
            }
                   .resultsDiv{
                align-content: center;
                background-color: palegoldenrod;
                margin: 10px 10% 10px;
                border-radius: 15px;

                max-width: 800px;

                padding: 20px;                
            }
            button {
                background-color: plum;
                width: fit-content;
                height: fit-content;
                padding-left: 2%;
                padding-right: 2%;
                padding-top: 0px;
                margin: 5px;
                border-radius: 15px; 
            }
            form {
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
            }

            label {
              min-width: 30%;
              margin-bottom: 10px;
            }

            input[type=text] {
                min-width: 45%;
                margin-bottom: 10px;
                border: 1px solid #ccc;
                border-radius: 4px;
                padding: 10px;
            }

            textarea {
                min-width: 45%;
                height: 100px;
                margin-bottom: 10px;
                border: 1px solid #ccc;
                border-radius: 4px;
                padding: 10px;
            }

            input[type=submit] {
                width: 100%;
                background-color: plum;
                padding: 14px;
                margin: 10px 30% 0;
                font-size: large;
                
                border-radius: 15px;
                cursor: pointer;
            }
            label:has(+ input:required):after {
                content: ' *';
                color: red;
            }
            table {
                font-family: arial, sans-serif;
                border-collapse: collapse;
                width: 100%;
            }

            td, th {
                border: 1px solid #000000;
                text-align: left;
                padding: 8px;
            }

            tr:nth-child(even) {
                background-color: #dddddd;
            }
        </style>
        <script>
            function openForm(divId) {
                closeForm('divAddArtist');
                closeForm('divAddSong');
                closeForm('divAddAlbum');
                closeForm('divSongByArtist');
                closeForm('divAlbumByArtist');
                closeForm('divSongByGenre');
                closeForm('divAlbumByGenre');
                document.getElementById(divId).style.display = "block";                
            }

            function closeForm(divId) {
                document.getElementById(divId).style.display = "none";
            }

            // Function that displays the results of a search query. The div
            // is hidden until after the query is run.
            function showResultsDiv(divId) {
                document.getElementById(divId).style.display = "block";
            }
        </script>
    </head>
    <body style="background-color: lightblue;">
        
        <div class="backgroundDiv">
            
            <div>
                <button onclick="window.location.href='songsleuth_homepage.html'"><h1><i>SongSleuth</i></h1></button>
            </div>
            <div style="/*background-color: green;*/
                        margin-top: 10px;
                        margin-bottom: 10px;
                        padding: 15px">
                <button onclick="openForm('divAddArtist')"><h2>Add New Artist</h3></button>
                <button onclick="openForm('divAddSong')"><h2>Add New Song</h3></button>
                <button onclick="openForm('divAddAlbum')"><h2>Add New Album</h3></button>
                <div style="/*background-color: yellow;*/
                        width:fit-content;
                        height: fit-content;
                        padding-top: 10px;
                        padding-bottom: 10px;
                        justify-self: center;">
                    <grid style="display: grid;
                                align-items: center;
                                grid-template-columns:  auto auto;">
                
                        <center><button onclick="openForm('divSongByArtist')"><h3>Query Songs By Artist</h3></button></center>
                        <center><button onclick="openForm('divAlbumByArtist')"><h3>Query Albums By Artists</h4></button></center>
                        <center><button onclick="openForm('divSongByGenre')"><h3>Query Songs By Genre</h4></button></center>
                        <center><button onclick="openForm('divAlbumByGenre')"><h3>Query Albums By Genre</h4></button></center>
                    </grid>

                    
                </div>

                <!-- The following divs are the add forms -->

                <!-- Add New Artist Form -->
                <div id="divAddArtist" class="formDiv">
                    <h2>Add New Artist</h2><br>
                    <form id="formAddArtist" method="POST">
                        <label for="artistName">Artist Name:</label>
                        <input type="text" id="artistName" name="artistName" placeholder="e.g. John Smith" required="true">

                        <label for="yearsStart">Years Active (Start):</label>
                        <input type="text" id="yearsStart" name="yearsStart" placeholder="YYYY or YYYY-MM-DD">

                        <label for="yearsEnd">Years Active (End):</label>
                        <input type="text" id="yearsEnd" name="yearsEnd" placeholder="YYYY or YYYY-MM-DD">

                        
                        <label for="groupAffils">Group Affiliations:</label>
                        <textarea id="groupAffils" name="groupAffils" placeholder="e.g. The Beatles, Queens of the Stone Age, Metallica"></textarea>

                        <button type="submit">Submit</button>
                    </form>
                </div>

                <!-- Add New Song Form -->
                <div id="divAddSong" class="formDiv">
                    <h2>Add New Song</h2><br>
                    <form id="formAddSong" method="POST">
                        <label for="songName">Song Name:</label>
                        <input type="text" id="songName" name="songName" placeholder="Song name" required="true">

                        <label for="songAlbumArtist">Album Artist:</label>
                        <input type="text" id="songAlbumArtist" name="songAlbumArtist" placeholder="This is the primary artist if song is a single" required="true">

                        <label for="songAlbum">Album:</label>
                        <input type="text" id="songAlbum" name="songAlbum" placeholder="Use the name of the song if it is a single">

                        <label for="trackNum">Track No.:</label>
                        <input type="text" id="trackNum" name="trackNum" placeholder="Where in the album the song is">
                        
                        <label for="performingArtists">Guest Artist:</label>
                        <input type="text" id="performingArtist" name="performingArtist" placeholder="Add a guest artist on the song"></textarea>

                        <label for="songGenre">Genre:</label>
                        <input type="text" id="songGenre" name="songGenre" placeholder="List one genre the song falls under">

                        <label for="songYear">Year:</label>
                        <input type="text" id="songYear" name="songYear" placeholder="Year the song was released, like 1996">

                        <label for="songLength">Song Length:</label>
                        <input type="text" id="songLength" name="songLength" placeholder="Inpt as HH:MM:SS (MUST include lead zeros)">

                        <input type="submit" value="Submit">
                    </form>
                </div>

                <!-- Add New Album Form -->
                <div id="divAddAlbum" class="formDiv">
                    <h2>Add New Album</h2><br>
                    <form id="formAddAlbum" method="POST">
                        <label for="albumName">Album Name:</label>
                        <input type="text" id="albumName" name="albumName" placeholder="Use the name of the song if the album is wrapping a single" required="true">

                        <label for="albumArtist">Album Artist:</label>
                        <input type="text" id="albumArtist" name="albumArtist" placeholder="The primary artist of the album">

                        <label for="albumRelease">Release Date:</label>
                        <input type="text" id="albumRelease" name="albumRelease" placeholder="The date the album was released">

                        
                        <label for="albumGenre">Genre(s):</label>
                        <textarea id="albumGenre" name="albumGenre" placeholder="List each genre that the song falls under, comma seperated"></textarea>

                        <input type="submit" value="Submit">
                    </form>
                </div>

                <!-- The following divs are the query forms -->

                <!--Song Artist Query Form-->
                <!-- This queries both performing artist and album artist -->
                <div id="divSongByArtist" class="formDiv">
                    <h2>Query Songs By Artist</h2><br>
                    <form id="formSongByArtist" method="POST">
                        <label for="querySongArtist">Artist Name:</label>
                        <input type="text" id="querySongArtist" name="querySongArtist" placeholder="e.g. Michael Jackson" required="true">

                        <button type="submit">Search</button>
                    </form>
                </div>                

                <!--Album Artist Query Form-->
                <div id="divAlbumByArtist" class="formDiv">
                    <h2>Query Albums By Artist</h2><br>
                    <form id="formAlbumByArtist" method="POST">
                        <label for="queryAlbumArtist">Artist Name:</label>
                        <input type="text" id="queryAlbumArtist" name="queryAlbumArtist" placeholder="e.g. Michael Jackson" required="true">

                        <button type="submit">Search</button>
                    </form>
                </div>

                <!-- Songs By Genre Query Form -->
                <div id="divSongByGenre" class="formDiv">
                    <h2>Query Songs By Genre</h2><br>
                    <form id="formSongByGenre" method="POST">
                        <label for="querySongGenre">Genre:</label>
                        <input type="text" id="querySongGenre" name="querySongGenre" placeholder="e.g. Depressive Black Metal" required="true">

                        <button type="submit">Search</button>
                    </form>
                </div>

                <!-- Albums By Genre Query Form -->
                <div id="divAlbumByGenre" class="formDiv">
                    <h2>Query Albums By Genre</h2><br>
                    <form id="formAlbumByGenre" method="POST">
                        <label for="queryAlbumGenre">Genre:</label>
                        <input type="text" id="queryAlbumGenre" name="queryAlbumGenre" placeholder="e.g. Depressive Black Metal" required="true">

                        <button type="submit">Search</button>
                    </form>
                </div>

                <!-- Query results table -->
                <div id="queryResults" class="tableDiv">                    
                </div>
            </div>
        </div>

        <!-- Neded for the ajax/jquery scripts to function -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <!-- Scripts to load the add new results -->
        <script>
            // Script to to display the results of adding a new artist
            $("#formAddArtist").submit(function(event) {
                event.preventDefault();                

                $.ajax({
                    type: "POST",
                    url: "add_new_artist.php",
                    data: {
                        artistName: $("#artistName").val(),
                        yearsStart: $("#yearsStart").val(),
                        yearsEnd: $("#yearsEnd").val(),
                        groupAffils: $("#groupAffils").val()
                    },                    
                    success: function(msg) {
                        alert(msg);
                    },
                    error: function() {
                        alert("Artist not added.");
                    }
                });
            });

            // Script to to display the results of adding a new song
            $("#formAddSong").submit(function(event) {
                event.preventDefault();                

                $.ajax({
                    type: "POST",
                    url: "add_new_song.php",
                    data: {
                        songName: $("#songName").val(),
                        songAlbumArtist: $("#songAlbumArtist").val(),
                        songAlbum: $("#songAlbum").val(),
                        trackNum: $("#trackNum").val(),
                        performingArtist: $("#performingArtist").val(),
                        songGenre: $("#songGenre").val(),
                        songYear: $("#songYear").val(),
                        songLength: $("#songLength").val()
                    },                    
                    success: function(msg) {
                        alert(msg);
                    },
                    error: function() {
                        alert("Song not added.");
                    }
                });
            });
            

            // Script to to display the results of adding a new album
            $("#formAddAlbum").submit(function(event) {
                event.preventDefault();                

                $.ajax({
                    type: "POST",
                    url: "add_new_album.php",
                    data: {
                        albumName: $("#albumName").val(),
                        albumArtist: $("#albumArtist").val(),
                        albumRelease: $("#albumRelease").val(),
                        trackNum: $("#trackNum").val(),
                        albumGenre: $("#albumGenre").val(),                        
                    },                    
                    success: function(msg) {
                        alert(msg);
                    },
                    error: function() {
                        alert("Album not added.");
                    }
                });
            });
        </script>

        <!-- Scripts to load the query results on the same page -->       
        <script>
            // Script to load Song Artist Query
            $("#formSongByArtist").submit(function(event) {
                event.preventDefault();                

                $.ajax({
                    type: "POST",
                    url: "query_song_artist.php",
                    data: { querySongArtist: $("#querySongArtist").val() },
                    success: function(data) {
                        $("#queryResults").html(data);
                        showResultsDiv("queryResults");
                    }
                });
            });

            // Script to load Album Artist Query
            $("#formAlbumByArtist").submit(function(event) {
                event.preventDefault();                

                $.ajax({
                    type: "POST",
                    url: "query_album_artist.php",
                    data: { queryAlbumArtist: $("#queryAlbumArtist").val() },
                    success: function(data) {
                        $("#queryResults").html(data);
                        showResultsDiv("queryResults");
                    }
                });
            });

            // Script to load Song Genre Query
            $("#formSongByGenre").submit(function(event) {
                event.preventDefault();                

                $.ajax({
                    type: "POST",
                    url: "query_song_genre.php",
                    data: { querySongGenre: $("#querySongGenre").val() },
                    success: function(data) {
                        $("#queryResults").html(data);
                        showResultsDiv("queryResults");
                    }
                });
            });

            // Script to load Album Genre Query
            $("#formAlbumByGenre").submit(function(event) {
                event.preventDefault();                

                $.ajax({
                    type: "POST",
                    url: "query_album_genre.php",
                    data: { queryAlbumGenre: $("#queryAlbumGenre").val() },
                    success: function(data) {
                        $("#queryResults").html(data);
                        showResultsDiv("queryResults");
                    }
                });
            });

        </script>
      
    </body>
</html>
